---
layout: post
title:  ブログテーマを大改造したので、Lighthouseで評価してみました
date:   2021/08/21 06:30:00
update: 2021/08/23 17:30:00
image:  /assets/post/00005/Lighthouse.png
toc:    true
tags:
  - ブログ構築
  - テーマ改良
  - 評価ツール
  - Lighthouse
---

# 初めに

[以前の記事]({% post_url /2021-08-06-00002 %})でテーマを適用してから大分改良したので、
画面基準でどこに手を加えたのかをわかりやすくするために一覧化しました。

また、どの程度変化したのか定量的に知りたくなったので、
Webサイトを評価する**Lighthouse**なるツールを使ってみました。


# ブログ変更概要

まずはテーマ適用時と改良後の変更概要です。

後述の一覧が意外と長くなってしまったので、概要も作成しました。

| No  | 実装状況               | 実装状況凡例 | 適用時 | 改良後       | 
| --: | ---------------------- | :----------: | -----: | -----------: | 
| 01  | 実装済み               | 〇           | 17     | 36(=17+6+13) | 
| 02  | 不十分な実装(要改良)   | △           | 6      | 0            | 
| 03  | 代替案あり             | -            | 6      | 0            | 
| 04  | 未実装(実装の発案含む) | ×           | 13     | 0            | 


# ブログ変更一覧

次にテーマ適用時と改良後の変更一覧です。

ブログデザインは体感70%ほど踏襲したので大きな変化はありませんが、
ソースコード(html,md,scss,js)は見やすいように整理したり、できることを増やしたりなど、
大改造したので原型を留めていません。

なお、長くなってしまったので読みたくない方は
[次の見出し](#lighthousewebサイト評価ツール)
へジャンプできます。

また、以下のボタンで画面要素の説明を表示できます。

<button type="button" class="btn btn-secondary" onClick="toggleLastCol('#blog-change-list', 'hide-last-col');">
	画面要素説明 ON/OFF
</button>

{: #blog-change-list .hide-last-col }
| No  | カテゴリ              | 画面要素                     | 適用時 | 改良後 | 画面要素説明                                                                                                             | 
| --: | --------------------- | ---------------------------- | :----: | :----: | ------------------------------------------------------------------------------------------------------------------------ | 
| 01  | 画面共通              | FontAwesomeアイコン          | 〇     | 〇     | 画面上で項目が何を意味するかわかりやすくするため、アイコンを設置する。                                                   | 
| 02  |                       | 下書き保存                   | ×     | 〇     | 記事を投稿する前に下書きとして一時的に保存する。                                                                         | 
| 03  |                       | 日本語化                     | ×     | 〇     | コンテンツを日本語で表示する。                                                                                           | 
| 04  |                       | レスポンシブデザイン         | 〇     | 〇     | デバイスの画面サイズに応じて表示を最適化する。                                                                           | 
| 05  |                       | ダークテーマ                 | 〇     | 〇     | テーマのデザインがダークである。                                                                                         | 
| 06  | 画面共通 - ヘッダ     | ブログ名                     | 〇     | 〇     | ブログ名を表示する。                                                                                                     | 
| 07  |                       | ナビバー                     | 〇     | 〇     | ナビバーを表示する。                                                                                                     | 
| 08  | 画面共通 - トップ     | トップ画像                   | ×     | 〇     | トップ画像を表示する。                                                                                                   | 
| 09  | 画面共通 - サイドバー | 記事検索                     | ×     | 〇     | ブログ内で記事を検索するフォームを表示する。                                                                             | 
| 10  |                       | 最近の記事                   | 〇     | 〇     | 最近投稿した記事を表示する。                                                                                             | 
| 11  |                       | タグ                         | △     | -      | タグのアルファベットの昇順で表示する。                                                                                   | 
| 12  |                       | ⇒　人気のタグ               | -      | 〇     | タグを記事数の降順で表示する。                                                                                           | 
| 13  |                       | トップへ戻るリンク           | ×     | 〇     | トップへ戻るリンクを表示する。                                                                                           | 
| 14  | 画面共通 - フッタ     | コピーライト                 | 〇     | 〇     | 著作権情報を表示する。                                                                                                   | 
| 15  |                       | ソーシャルリンク             | 〇     | 〇     | ソーシャルアカウントのリンクを表示する。                                                                                 | 
| 16  | ホーム画面            | 記事一覧(簡易)               | △     | -      | 記事一覧(簡易)を表示する。                                                                                               | 
| 17  |                       | ⇒　記事一覧(詳細)           | -      | 〇     | 記事一覧(詳細)を表示する。1記事あたりの情報量を多くし、見やすい形式。                                                    | 
| 18  |                       | 記事ヘッダ画像               | ×     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 19  |                       | 投稿時間                     | 〇     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 20  |                       | 編集時間                     | ×     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 21  |                       | タグ                         | 〇     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 22  |                       | 記事説明                     | △     | -      | 記事の情報を表示する。                                                                                                   | 
| 23  |                       | ⇒　記事抜粋                 | -      | 〇     | 記事の情報を表示する。                                                                                                   | 
| 24  |                       | 記事を読むリンク             | ×     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 25  |                       | 記事一覧(詳細)のページ送り   | ×     | 〇     | 記事一覧(詳細)のページ送りを表示する。                                                                                   | 
| 26  | タグ一覧画面          | タグ一覧(投稿日昇順)         | △     | -      | タグ一覧を記事の投稿日の昇順で表示する。                                                                                 | 
| 27  |                       | ⇒　タグ一覧(記事数降順)     | -      | 〇     | タグ一覧を記事数の降順で表示する。また各項目に記事の件数を表示する。                                                     | 
| 28  | アーカイブ画面        | 年別アーカイブ               | △     | -      | 年別の記事一覧(簡易)を全て表示する。                                                                                     | 
| 29  |                       | ⇒　年月別、タグ別アーカイブ | -      | 〇     | 年月別、タグ別の記事一覧(簡易)を個別に表示する。また各項目に記事の件数を表示する。                                       | 
| 30  | タグ別記事一覧画面    | タグ別記事一覧(簡易)         | △     | -      | タグ内の記事一覧(簡易)を投稿日の降順で表示する。記事を作成する際に新しいタグを使う場合はタグ専用ファイルを作成する。     | 
| 31  |                       | ⇒　タグ別記事一覧(詳細)     | -      | 〇     | タグ内の記事一覧(詳細)を投稿日の降順で表示する。タグ専用ファイルは作成しない。                                           | 
| 32  | プロフィール画面      | 紹介文                       | 〇     | 〇     | 投稿者やブログの紹介文を表示する。                                                                                       | 
| 33  | 記事画面              | タイトル                     | 〇     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 34  |                       | 投稿時間                     | 〇     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 35  |                       | 編集時間                     | ×     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 36  |                       | 変更履歴 on GitHub           | ×     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 37  |                       | タグ                         | 〇     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 38  |                       | 記事ヘッダ画像               | ×     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 39  |                       | 目次                         | 〇     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 40  |                       | 記事内容                     | 〇     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 41  |                       | 記事内容画像                 | 〇     | 〇     | 記事の情報を表示する。                                                                                                   | 
| 42  |                       | 記事のページ送り             | ×     | 〇     | 記事のページ送りを表示する。                                                                                             | 


# Lighthouse(Webサイト評価ツール)

Google製のWebサイト評価ツールを使えば独自の観点で品質を評価してくれるみたいです。
デベロッパーツールから実行できるので手間いらずです。

実行前に評価項目や点数の見方を簡単に整理してみました。
大体の内容を掴めれば問題ないかと思います。


## 評価項目

[Lighthouse公式ドキュメント(WEB.DEV)](https://web.dev/learn/#lighthouse)
を基に翻訳して情報を整理してみました。

  - Performance (パフォーマンス)
    - サイト内の処理速度に関する評価
      - ページの読み込み速度
      - 画像の表示速度
      - ユーザーの操作に対するレスポンス速度
      - など
  - Accessibility (アクセシビリティ)
    - 以下に対して最適な作りになっているか
      - サイトの訪問者
      - 検索エンジンのための収集ロボット
      - など
  - Best Practices (ベストプラクティス)
    - パフォーマンス低下に繋がる事をしていないか
      - httpsを使用しているか
      - キャッシュを利用しているか
      - 画像のアスペクト比が適切あるか
      - 古く脆弱性があるAPIを使っていないか
      - など
  - SEO (検索エンジン最適化)
    - 検索エンジンの結果ランキングでページが最適化されているか
      - タイトルタグがあるか
      - メタタグのディスクリプションがあるか
      - モバイルフレンドリーになっているか
      - など


## 点数の見方

| 色       | 点数    | 合否   | 
| -------- | ------- | ------ | 
| 赤       | 0～ 49  | 不合格 | 
| オレンジ | 50～ 89 | 要改良 | 
| 緑       | 90～100 | 合格   | 


# Lighthouseによる評価

## JekyllCleanDarkテーマ適用時の評価

本当は自分のリポジトリに適用した時点で評価したかったんですが、
いろいろな理由(要約するとめんどくさい)でテーマのデモサイトで評価してみました。

評価概要を画像で掲載します。
詳細は
[こちら]({{ '/assets/post/00005/score_at_the_time_of_application.html' | relative_url }}){: target="_blank" }
になります。

![適用時の評価]({{ '/assets/post/00005/score_at_the_time_of_application.JPG' | relative_url }})


## このブログの改良後の評価

続いて改良後を評価してみました。

評価概要を画像で掲載します。
詳細は
[こちら]({{ '/assets/post/00005/score_after_improvement.html' | relative_url }}){: target="_blank" }
になります。

![改良後の評価]({{ '/assets/post/00005/score_after_improvement.JPG' | relative_url }})


# 評価にて感じたこと

これでテーマ適用時と改良後の点数が評価ツールによりわかりました。
所感では大分良くなったと思っていましたが、点数からも良くなったことが分かりました。

後は評価項目以外でも評価できる箇所(各ページの情報の出し方や記事検索など)はあるので、
使ってみてどうなるかというところですね。

これからも改良は続けていきたいです。


# 余談

テーブルの表示に関してです。

テーブルにスクロールバーを表示させて見出しを固定させたかったのですが、
前者は現状のmd記法では不可能で、独自拡張されたmd記法でないと記述できなさそうです。
もしくはmd記法内でhtml記法のテーブルを直接記述しないと実現できないみたいですが、
編集が大変そうで手が出せません。
なので代替案としてON/OFFボタンを設置しました。


# 出典元・参考サイト

  1. [Lighthouse公式ドキュメント(WEB.DEV)
     ](https://web.dev/learn/#lighthouse)

